{% extends 'certgen/layout.html' %}
{% load static %}

{% block styles %}
<link rel="stylesheet" href="{% static 'certgen/css/certgen.css' %}">
<link rel="stylesheet" href="{% static 'certgen/css/colors.css' %}">
{% endblock %}

{% block content %}
<div id="certificate-modal" class="modal">
  <div data-modal-id="certificate-modal" class="modal-background"></div>
  <div class="modal-content">
    <p class="image is-4by3"><img src=""></p>
  </div>
  <button data-modal-id="certificate-modal" class="modal-close is-large" aria-label="close"></button>
</div>

<div class="columns is-9 is-variable">
  <div class="column"></div>

  <div class="column is-4">
    <!-- certificate-template-card -->
    <div class="card border-is-mint">
      <div id="template-thumb" class="card-image drop-zone" ondrop="dropHandler(event, this);" ondragover="dragOverHandler(event);">
        <!-- = = = = = = = = = IMAGE SECTION = = = = = = = = = = = = -->
        <figure class="image is-3by2">
          <img data-modal-id="certificate-modal" data-card-img-id="template-thumb" class="drop" src="" alt="Certificate">
          <div class="drop la-active" href="">
            <div class="dropbox is-mint center has-text-centered">
              Drop image here
            </div>
          </div>
        </figure>

        <div class="has-text-weight-normal upperleft">
          <span class="tag is-medium is-mint sharp-border">
            Certificate Template
          </span>
        </div>

        <div class="upperright">
          <button data-type-to-remove="img" data-card-img-id="template-thumb" class="delete is-medium remove-file"></button>
        </div>

      </div>
      <!-- = = = = = = = = = = = = = = = = = = = = = = = = = = = = = -->
      <div class="card-content top-border-is-1 border-is-mint">
        <div class="content has-text-centered">
          <label for="upload-template" class="is-size-4 has-text-dark upload-template">Choose Photo</label>
          <input id="upload-template" data-card-img-id="template-thumb" type="file" name="photo" accept="image/png, image/jpeg">
          <p class="has-text-dark">--- or ---</p>
          <div class="paste-content field columns is-centered has-addons input-link">
            <div class="control">
              <input type="text" data-card-img-id="template-thumb" id="paste-template" class="input is-size-7 is-dark" placeholder="Paste image URL here">
            </div>
            <div class="control">
              <button class="button is-reverse-mint is-small"><i class="fa fa-check"></i></button>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="has-text-weight-normal">
        <a><span class="tag is-medium is-dark is-mint-hover sharp-border">
            POSITION PLACEHOLDER
        </span></a>
    </div>
    <!-- = = = = = = = = = = = = = = = = = = = = = = = = = = = = = -->
  </div>


  <div class="column is-4">
    <!-- names-card -->
    <div id="names-card" class="card border-is-mint">

      <div id="certificate-thumb" class="card-image drop-zone" ondrop="dropHandler(event, this);" ondragover="dragOverHandler(event);">
      <!-- = = = = = = = = = IMAGE SECTION = = = = = = = = = = = = -->
        <figure class="image is-3by2">
          <img data-modal-id="certificate-modal" data-card-img-id="certificate-thumb" class="drop" src="" alt="Certificate">
          <div class="drop la-active" href="">
            <div class="dropbox is-mint center has-text-centered">
              Drop file here <button data-type="file" class="delete is-medium remove-file"></button>
            </div>
          </div>
        </figure>

        <div class="has-text-weight-normal upperleft">
          <span class="tag is-medium is-mint sharp-border">
            File Containing Names
          </span>
        </div>

        <div id="dropdown-names" class="dropdown is-hoverable upperright">
          <div class="dropdown-trigger">
            <a>
              <span class="tag is-medium is-dark is-mint-hover sharp-border" aria-haspopup="true" aria-controls="dropdown-menu4">
                <span>The Names</span>
                <span class="icon is-small">
                  <i class="fas fa-angle-down" aria-hidden="true"></i>
                </span>
              </span>
            </a>
          </div>
          <div class="dropdown-menu" role="menu">
            <div id="dropdown-name-items" class="dropdown-content is-mint">
              {% verbatim %}
              <template id="dropdown-item-template">
                <div class="dropdown-item">
                    <span><button class="delete is-small"></button>{{name}}</span>
                </div>
              </template>
              {% endverbatim %}
            </div>
          </div>
        </div>

      </div>
      <!-- = = = = = = = = = = = = = = = = = = = = = = = = = = = = = -->
      <div class="card-content top-border-is-1 border-is-mint">
        <div class="content has-text-centered">
          <label for="upload-namesfile" class="is-size-4 has-text-dark upload-template">Choose Spreadsheet File</label>
          <input type="file" name="namesfile" id="upload-namesfile" accept=".xlsx, .json, .csv" multiple>

          <p class="has-text-dark">--- or ---</p>
          <div class="paste-content field columns is-centered has-addons">
            <div class="control">
              <input id="paste-names" type="text" data-card-img-id="template-thumb" class="input is-size-7 is-dark" placeholder="Paste comma-separated names here">
            </div>
            <div class="control">
              <!-- TODO: add jquery to change button icon to loading when generating preview certificate -->
              <button class="button is-reverse-mint is-small"><i class="fa fa-check"></i></button>
            </div>
          </div>
        </div>
      </div>

    </div>
    <div class="has-text-weight-normal is-pulled-right">
        <a><span class="tag is-medium is-dark is-mint-hover sharp-border">
            GENERATE
        </span></a>
    </div>
  <!-- = = = = = = = = = = = = = = = = = = = = = = = = = = = = = -->
  </div>

  <div class="column"></div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.3/xlsx.js"></script>
<script src="{% static 'certgen/js/certgen.js' %}"></script>
{% endblock %}
